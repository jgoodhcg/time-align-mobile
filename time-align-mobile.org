#+TODO: TODO DOSUB | DONE CANCELED 
#+PROPERTY: Effort_ALL 0 0:10 0:30 1:00 2:00 3:00 4:00 5:00 6:00 7:00
#+COLUMNS: %40ITEM(Task) %10Confidence(Confidence){mean} %17Effort(Estimated Effort){:} %CLOCKSUM

* DOSUB Time Align Mobile
  :LOGBOOK:
  CLOCK: [2019-08-11 Sun 19:08]--[2019-08-11 Sun 19:17] =>  0:09
  CLOCK: [2019-08-10 Sat 12:51]--[2019-08-10 Sat 13:11] =>  0:20
  CLOCK: [2019-07-20 Sat 21:52]--[2019-07-20 Sat 22:10] =>  0:18
  CLOCK: [2019-07-20 Sat 18:55]--[2019-07-20 Sat 18:56] =>  0:01
  CLOCK: [2019-07-13 Sat 18:20]--[2019-07-13 Sat 18:42] =>  0:22
  CLOCK: [2019-06-29 Sat 18:06]--[2019-06-29 Sat 18:10] =>  0:04
  CLOCK: [2019-06-17 Mon 17:42]--[2019-06-17 Mon 18:14] =>  0:32
  CLOCK: [2019-05-09 Thu 20:30]--[2019-05-09 Thu 20:55] =>  0:25
  CLOCK: [2018-09-21 Fri 07:39]--[2018-09-21 Fri 07:40] =>  0:01
  CLOCK: [2018-08-29 Wed 14:41]--[2018-08-29 Wed 14:46] =>  0:05
  CLOCK: [2018-08-19 Sun 16:05]--[2018-08-19 Sun 16:09] =>  0:04
  CLOCK: [2018-08-19 Sun 15:56]--[2018-08-19 Sun 16:05] =>  0:09
  CLOCK: [2018-08-18 Sat 15:07]--[2018-08-18 Sat 15:11] =>  0:04
  CLOCK: [2018-07-17 Tue 18:58]--[2018-07-17 Tue 19:17] =>  0:19
  :END:
** DOSUB Release to strangers
*** DOSUB New day design
    :PROPERTIES:
    :Effort:   24:00
    :Confidence: 50
    :END:
    :LOGBOOK:
    CLOCK: [2019-08-10 Sat 19:29]--[2019-08-10 Sat 19:36] =>  0:07
    CLOCK: [2019-08-10 Sat 13:11]--[2019-08-10 Sat 13:12] =>  0:01
    :END:
**** DONE Top bar with scroll view below
     CLOSED: [2019-08-10 Sat 14:47]
     :LOGBOOK:
     CLOCK: [2019-08-10 Sat 14:39]--[2019-08-10 Sat 14:47] =>  0:08
     CLOCK: [2019-08-10 Sat 13:37]--[2019-08-10 Sat 13:54] =>  0:17
     CLOCK: [2019-08-10 Sat 13:28]--[2019-08-10 Sat 13:36] =>  0:08
     CLOCK: [2019-08-10 Sat 13:24]--[2019-08-10 Sat 13:28] =>  0:04
     CLOCK: [2019-08-10 Sat 13:15]--[2019-08-10 Sat 13:24] =>  0:09
     CLOCK: [2019-08-10 Sat 13:12]--[2019-08-10 Sat 13:14] =>  0:02
     :END:
- [X] Get to a clean commit
- [X] Blow away everything in day-screen ns and the day-comp ns
- [X] Set up a day-comp ns with a placeholder
- [X] Get code to compile and show placeholder for pattern-planning and day screens
- [X] Change day screen ns
- [X] Add a top bar section
- [X] Add a scroll view below it
**** DONE Add time section
     CLOSED: [2019-08-10 Sat 16:56]
     :LOGBOOK:
     CLOCK: [2019-08-10 Sat 16:45]--[2019-08-10 Sat 16:56] =>  0:11
     CLOCK: [2019-08-10 Sat 14:39]--[2019-08-10 Sat 15:40] =>  1:01
     :END:
- [X] Get relative positioning figured out
- [X] Add dividers
- [X] Figure out how it relates to periods
**** DONE Add Zomming functionality
     CLOSED: [2019-08-10 Sat 19:27]
     :LOGBOOK:
     CLOCK: [2019-08-10 Sat 18:21]--[2019-08-10 Sat 19:27] =>  1:06
     :END:
- [X] Put pixel ration in app-db
- [X] Make handlers/subs to adjust
- [X] Use deep merge on loading and importing db to handle app-db accretion
**** DONE Add periods/templates (elements)
     CLOSED: [2019-08-13 Tue 19:42]
     :LOGBOOK:
     CLOCK: [2019-08-13 Tue 18:14]--[2019-08-13 Tue 18:45] =>  0:31
     CLOCK: [2019-08-12 Mon 18:13]--[2019-08-12 Mon 18:54] =>  0:41
     CLOCK: [2019-08-12 Mon 18:08]--[2019-08-12 Mon 18:13] =>  0:05
     CLOCK: [2019-08-11 Sun 18:07]--[2019-08-11 Sun 18:25] =>  0:18
     CLOCK: [2019-08-11 Sun 17:47]--[2019-08-11 Sun 18:07] =>  0:20
     CLOCK: [2019-08-11 Sun 14:41]--[2019-08-11 Sun 15:47] =>  1:06
     CLOCK: [2019-08-11 Sun 14:40]--[2019-08-11 Sun 14:40] =>  0:00
     CLOCK: [2019-08-11 Sun 13:16]--[2019-08-11 Sun 13:43] =>  0:27
     CLOCK: [2019-08-10 Sat 23:43]--[2019-08-10 Sat 23:50] =>  0:07
     CLOCK: [2019-08-10 Sat 23:12]--[2019-08-10 Sat 23:29] =>  0:17
     CLOCK: [2019-08-10 Sat 22:19]--[2019-08-10 Sat 23:09] =>  0:50
     CLOCK: [2019-08-10 Sat 22:09]--[2019-08-10 Sat 22:19] =>  0:10
     CLOCK: [2019-08-10 Sat 21:56]--[2019-08-10 Sat 22:08] =>  0:12
     CLOCK: [2019-08-10 Sat 20:58]--[2019-08-10 Sat 21:36] =>  0:38
     CLOCK: [2019-08-10 Sat 20:33]--[2019-08-10 Sat 20:57] =>  0:24
     :END:
 - [X] Refactor the day comp
 - [X] Move tim indicators
 - [X] Add reference from old rendering
 - [X] Make the time indicator bar position (center of text) the exact time of the indicator
 - [X] Actually fix teh time indicator
 - [X] Add elements comp and borders
 - [X] Render some elements in the correct position
 - [X] Add navigators to day top bar
 - [X] Refactor rendering element
 - [X] Fix borders
 - [X] Render collision group offsets
 - [X] Selection
 
**** TODO Dragging element to move on selection
     :LOGBOOK:
     CLOCK: [2019-08-30 Fri 16:12]--[2019-08-30 Fri 16:12] =>  0:00
     CLOCK: [2019-08-30 Fri 16:01]--[2019-08-30 Fri 16:11] =>  0:10
     CLOCK: [2019-08-30 Fri 15:49]--[2019-08-30 Fri 15:58] =>  0:09
     CLOCK: [2019-08-30 Fri 14:50]--[2019-08-30 Fri 15:38] =>  0:48
     CLOCK: [2019-08-25 Sun 16:32]--[2019-08-25 Sun 17:11] =>  0:39
     CLOCK: [2019-08-25 Sun 16:26]--[2019-08-25 Sun 16:32] =>  0:06
     CLOCK: [2019-08-25 Sun 16:25]--[2019-08-25 Sun 16:25] =>  0:00
     CLOCK: [2019-08-25 Sun 15:50]--[2019-08-25 Sun 16:24] =>  0:34
     CLOCK: [2019-08-25 Sun 12:13]--[2019-08-25 Sun 12:13] =>  0:00
     CLOCK: [2019-08-25 Sun 12:05]--[2019-08-25 Sun 12:13] =>  0:08
     CLOCK: [2019-08-24 Sat 18:21]--[2019-08-24 Sat 18:24] =>  0:03
     CLOCK: [2019-08-24 Sat 18:05]--[2019-08-24 Sat 18:09] =>  0:04
     CLOCK: [2019-08-24 Sat 17:54]--[2019-08-24 Sat 17:59] =>  0:05
     CLOCK: [2019-08-24 Sat 17:29]--[2019-08-24 Sat 17:53] =>  0:24
     CLOCK: [2019-08-24 Sat 16:26]--[2019-08-24 Sat 16:31] =>  0:05
     CLOCK: [2019-08-24 Sat 14:00]--[2019-08-24 Sat 14:29] =>  0:29
     CLOCK: [2019-08-24 Sat 13:43]--[2019-08-24 Sat 14:00] =>  0:17
     CLOCK: [2019-08-24 Sat 13:18]--[2019-08-24 Sat 13:43] =>  0:25
     CLOCK: [2019-08-20 Tue 19:13]--[2019-08-20 Tue 19:16] =>  0:03
     CLOCK: [2019-08-18 Sun 19:10]--[2019-08-18 Sun 19:20] =>  0:10
     CLOCK: [2019-08-18 Sun 12:45]--[2019-08-18 Sun 13:11] =>  0:26
     CLOCK: [2019-08-18 Sun 12:17]--[2019-08-18 Sun 12:38] =>  0:21
     CLOCK: [2019-08-17 Sat 20:52]--[2019-08-17 Sat 22:08] =>  1:16
     CLOCK: [2019-08-17 Sat 15:27]--[2019-08-17 Sat 16:25] =>  0:58
     CLOCK: [2019-08-17 Sat 14:53]--[2019-08-17 Sat 15:00] =>  0:07
     CLOCK: [2019-08-17 Sat 14:06]--[2019-08-17 Sat 14:40] =>  0:34
     CLOCK: [2019-08-17 Sat 13:49]--[2019-08-17 Sat 13:59] =>  0:10
     CLOCK: [2019-08-17 Sat 11:20]--[2019-08-17 Sat 11:52] =>  0:32
     CLOCK: [2019-08-17 Sat 10:43]--[2019-08-17 Sat 10:43] =>  0:00
     CLOCK: [2019-08-17 Sat 10:42]--[2019-08-17 Sat 10:43] =>  0:01
     CLOCK: [2019-08-17 Sat 09:28]--[2019-08-17 Sat 09:52] =>  0:24
     CLOCK: [2019-08-17 Sat 09:09]--[2019-08-17 Sat 09:28] =>  0:19
     CLOCK: [2019-08-16 Fri 18:11]--[2019-08-16 Fri 19:23] =>  1:12
     CLOCK: [2019-08-14 Wed 18:15]--[2019-08-14 Wed 19:29] =>  1:14
     CLOCK: [2019-08-13 Tue 19:41]--[2019-08-13 Tue 19:41] =>  0:00
     CLOCK: [2019-08-13 Tue 19:10]--[2019-08-13 Tue 19:41] =>  0:31
     :END:
-[X] Read about gesture handlers
- https://docs.expo.io/versions/latest/sdk/gesture-handler/
- https://kmagiera.github.io/react-native-gesture-handler/docs/about-handlers.html
- [X] Add a pan gesture handler to something
- [X] Play with nested handlers and waitfor
- [X] Update app to remove scroll-view-gesture comp warnings
  - [X] Update to sdk 33
  - [X] Update shadow-cljs
    - Apparently only the devDependencies in package.json matters?
  - [X] Resolve warnings
    - File system warning doesn't make sense ...
    - [X] Remove keep awake usage
      - https://github.com/thheller/shadow-cljs/issues/513
      - Might add it back later if it is an issue https://docs.expo.io/versions/latest/sdk/keep-awake/
  - [X] Update to sdk 34
- [X] Figure out smooth pan movement
  - https://gist.github.com/scottdw/2960070#file-stats-clj-L5
  - https://stackoverflow.com/a/3761318/5040125
  - https://github.com/kmagiera/react-native-gesture-handler/issues/621#issuecomment-522272948
  - After graphing it out it seems like the values jump by 100 for a handful of events then jump back
  - +Need to use absoluteY but it seems to behave like a relative thing when I scroll+
  - Solution is to wrap scroll in pan and use selected as a toggle (lock/mutex)
    - Now ~nativeEvent.y~ can be used and it works for the entire screen or day view (hopefully).
    - Can be resumed after pan ends
- [X] Figure out gesture handler experience
  - Be able to scroll
  - When holding an element enter a state to drag it around updating start/stop on release
    - Needs a ~pan~ on the day view that is simultaneous with a ~long press~ on each element
    - When ~long press~ is active set the selection state
    - When selection state is active then the ~pan~ is enabled it updates the form
    - When ~long press~ is released the pan is disabled and the form is saved
  - ~Tap~ an element opens form in bottom sheet
    - Needs to wrap the ~long press~ and wait for it
    - ~Tap~ should not activate if the long press activates then ends
- [-] Implement gesture handler experience on calendar page
  - [X] (scroll) Add scroll view that locks out on selection and waits for pinch
  - [X] (drag) Add pan gesture handler that locks out on no selection and waits for pinch
    - [X] Fix top being at finger
  - [X] (zoom) Add pinch gesture
  - [X] (bottom sheet pop up selection) Add tap handler that wraps element and waits on long press
  - [X] (movement selection) Add long press wrapping element directly
  - [-] Use simultaneous prop for long press and pan
    - Having a hard time achieving this
    - https://github.com/kmagiera/react-native-gesture-handler/issues/434
  - [X] Use rect button
  - [X] Replace long press with double tap for movement selection
- [-] Implement handlers on day page
  - [X] Add top level todo items
  - [-] Refactor selections
    - [X] App-db
      - [X] Reformat ns
    - [ ] Handlers
    - [ ] Subscriptions
  - [ ] Scroll
  - [ ] Pan
  - [ ] Pinch
  - [ ] Rect-button
  - [ ] Double-tap
**** TODO Stretch mode
**** TODO Add bottom sheet for period editing and selection
https://github.com/osdnk/react-native-reanimated-bottom-sheet
*** TODO Fix drawer bug
    :PROPERTIES:
    :Effort:   3:00
    :Confidence: 80
    :END:
When a contained button or surface element is used on the screen component it doesn't /go under/ the drawer overlay
Also might need to replace drawer with another component library to support non swipe opening for a11y.
*** TODO Add locked period mechanism
    :PROPERTIES:
    :Effort:   8:00
    :Confidence: 65
    :END:
When using the transform arrows to move things around the other periods (in the day?) should get pushed unless locked.
Have a lock / unlock all button.
*** TODO Mobile friendly data editor
    :PROPERTIES:
    :Effort:   8:00
    :Confidence: 75
    :END:
    :LOGBOOK:
    CLOCK: [2019-08-08 Thu 21:25]--[2019-08-08 Thu 22:56] =>  1:31
    CLOCK: [2019-08-08 Thu 19:42]--[2019-08-08 Thu 20:42] =>  1:00
    :END:
https://gist.github.com/jgoodhcg/ed3cb0b51f117553e2b04ca62946b68d
*** TODO Checklists
    :PROPERTIES:
    :Effort:   6:00
    :Confidence: 65
    :END:
- [ ] Add basic data to spec template
- [ ] Add basic data to spec period
- [ ] Create components for forms
  - [ ] Period
  - [ ] Period compact (modal?)
  - [ ] Template
  - [ ] Template compact (modal?)
  - [ ] Create complete state indicator
*** TODO Notifications (push?)
    :PROPERTIES:
    :Effort:   4:00
    :Confidence: 80
    :END:
    :LOGBOOK:
    CLOCK: [2019-07-27 Sat 17:01]--[2019-07-27 Sat 17:54] =>  0:53
    :END:
- [[https://docs.expo.io/versions/latest/sdk/notifications/#notificationsschedulelocalnotificationasynclocalnotification-schedulingoptions][Schedule local notifications]]
- [[https://docs.expo.io/versions/latest/sdk/notifications/#subscribing-to-notifications][Listen for notifications]]
- [X] Test a local notification
- [ ] Schedule a notification side effect on planned period creation
  - [ ] Add period handler
  - [ ] Apply pattern handler
- [ ] Register a listener to navigate to day
*** TODO Fix template editing bug with end time
    :PROPERTIES:
    :Confidence: 65
    :Effort:   2:00
    :END:
Using the arrows to have the start go to the day before or end to day after seems to work fine.
Check that it works past 24+ hours.
Using the button to set the time into yesterday or tomorrow doesn't work. (needs to be relative...)
*** TODO Fix navigation
    :PROPERTIES:
    :Effort:   5:00
    :Confidence: 50
    :END:
- [ ] Move history to app-db
- [ ] Limit to X items
- [ ] Back should pop off history
- [ ] Delete actions should nav-back
*** TODO Markov chain prediction
    :PROPERTIES:
    :Effort:   16:00
    :Confidence: 30
    :END:
*** TODO Report Page
    :PROPERTIES:
    :Effort:   40:00
    :Confidence: 25
    :END:
*** TODO Queue page
    :PROPERTIES:
    :Effort:   10:00
    :Confidence: 50
    :END:
**** TODO Add queue definition to app-db
- [ ] queue definition
  - Include priority?
- [ ] ~:queue~ key under ~:bucket~
**** TODO Add queue form
**** TODO Add queue list
**** TODO Add conversion to planned period function
*** TODO Calendar Page
    :PROPERTIES:
    :Effort:   30:00
    :Confidence: 50
    :END:
*** TODO Analytics
    :PROPERTIES:
    :Effort:   4:00
    :Confidence: 25
    :END:
** Dreams
- Meta data (with mobile friendly editor) on all entities
- [[https://practicalli.github.io/spacemacs/improving-code/linting/][Linting]]
- Multiple play timers
- Fully namespaced keys only
- Add Extra buttons to selection menus
  - Add period to pattern
  - Edit on full form
- DRY up spectre paths
- Spec everything
- Unit test every function
- Accessibility
- Energy meter
- Advanced notifications with interaction
  
